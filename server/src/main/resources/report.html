{% extends "layout.html" %}

{% block title %} Report {% endblock %}

{% block content %}
<h1>{{ report.getSubject() }}</h1>

<p>Report id: <b>{{ report.getId() }}</b></p>
<p>Label: {{ report.getlabel() }}</p>
<p>Score: <b>{{ report.getScore() }}</b></p>
<p>Timestamp: {{ report.timeFormatted() }}</p>
<p>{{ report.getReport() | raw }}</p>



<h3>History</h3>

<canvas id="chart-report-history"></canvas>

<table class="table">
{% for r in history %}
<tr>
    <td>{{ r.getScore() }}</td>
    <td>{{ r.timeFormatted() }}</td>
    <td>
        <a href="/report/{{ r.getId() }}">View</a>
    </td>
</tr>
{% endfor %}
</table>

<h3>References</h3>
<table class="table">
{% for r in references %}
<tr>
    <td>{{ r.getScore() }}</td>
    <td>{{ r.timeFormatted() }}</td>
    <td>
        <a href="/report/{{ r.getId() }}">View</a>
    </td>
</tr>
{% endfor %}
</table>

<script>
var ctx = document.getElementById('chart-report-history').getContext('2d');
var chart = new Chart(ctx, {
    // The type of chart we want to create
    type: 'line',

    // The data for our dataset
    data: {
        datasets: [{
            borderColor: 'rgb(255, 99, 132)',
            data: {{ history_json | raw }}
        }]
    },

    // Configuration options go here
    options: {
        legend: {
            display: false,
        },
        elements: {
            line: {
                tension: 0 // disables bezier curves
            }
        },
        scales: {
            xAxes: [{
                type: 'time',
                display: true,
                scaleLabel: {
                        display: true,
                        labelString: 'Time'
                }
            }],
            yAxes: [{
                ticks: {
                    beginAtZero:true
                },
                scaleLabel: {
                    display: true,
                    labelString: 'Score'
                }
            }]
        }
    }
});
</script>

{% endblock %}


